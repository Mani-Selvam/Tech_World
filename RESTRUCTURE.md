# Project Restructured to Separated Client/Server Architecture

This project has been restructured from a monorepo to independent `/client` and `/server` directories.

## New Structure

```
├── client/                    # Frontend (React + Vite)
│   ├── src/                   # React source files
│   ├── package.json          # Client dependencies
│   ├── tsconfig.json         # Client TypeScript config
│   ├── vite.config.ts        # Client Vite config
│   └── index.html
│
├── server/                    # Backend (Express API)
│   ├── src/                   # Server source files
│   │   ├── index.ts          # Entry point (port 3001)
│   │   ├── routes.ts         # API routes
│   │   ├── storage.ts        # Data storage
│   │   └── db.ts             # Database config
│   ├── package.json          # Server dependencies
│   └── tsconfig.json         # Server TypeScript config
│
├── shared/                    # Shared types & schemas
│   └── schema.ts             # Data models
│
├── attached_assets/           # Images and static assets
├── public/                    # PWA manifest and service worker
└── migrations/                # Database migrations (generated by drizzle-kit)
```

## Running the Application

### Development

**Terminal 1 - Client (Vite dev server on port 5000):**
```bash
cd client
npm install
npm run dev
```

**Terminal 2 - Server (Express API server on port 3001):**
```bash
cd server
npm install
npm run dev
```

Then open `http://localhost:5000` in your browser. The frontend automatically proxies API calls to `http://localhost:3001`.

### Production

```bash
# From root directory
npm run build    # Builds client and server
npm start        # Starts server with built frontend
```

## Key Changes

- **Port Changes**: Server moved from port 5000 to port 3001
- **Client Proxy**: Client's Vite config includes a proxy to forward `/api/*` requests to server on port 3001
- **Independent Scripts**: Each directory has its own `package.json` with relevant dependencies
- **Shared Code**: Both client and server reference `../shared/schema.ts` for types
- **Assets**: Both client and server can access `../attached_assets/`

## Building for Production

From the root directory:

```bash
# Install dependencies for both client and server
npm install

# Build everything
npm run build

# Run production server (serves built frontend + API on port 3001)
npm start
```

The production build will:
1. Build the React frontend to `dist/public/`
2. Bundle the Express server to `dist/`
3. When the server starts, it serves the built frontend alongside the API

## Environment Variables

Create a `.env` file in the root directory with:
```
DATABASE_URL=your_database_url
NODE_ENV=development
```

Both client and server share this environment configuration.

## Database Migrations

To push schema changes to the database:

```bash
npm run db:push
```

This runs from the root (which has drizzle.config.ts).
